{"id":"northstar-0be","title":"Translate the dashboard widgets","description":"The dashboard page widgets are still mainly hardcoded strings. They need to following the internalitzation pattern established accross the codebase and translated the suitable strings. Mainly UI components and layout at the present moment.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:28:42.274869-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T14:11:27.158751-03:00","closed_at":"2026-01-02T14:11:27.158751-03:00","close_reason":"Closed"}
{"id":"northstar-110","title":"Fix: FAB modal shows 'Saving...' instead of optimistic UI","description":"## Problem\nThe FAB (Floating Action Button) and BottomTabBar modals show \"Saving...\" and wait for server response when creating expenses/income. They don't use optimistic UI like the list pages do.\n\n## Root Cause\nReact Context flows DOWN the component tree, not UP. Architecture issue:\n\n```\nLayout (app/(app)/layout.tsx)\n├── SidebarInset\n│   └── {children}  ← ExpenseListProvider/IncomeListProvider live HERE (page level)\n├── FAB (lines 38-43)\n│   └── TransactionForm  ← OUTSIDE providers, context = null\n└── BottomTabBar (lines 46-50)\n    └── TransactionForm  ← OUTSIDE providers, context = null\n```\n\n## What Happens\n1. User clicks FAB → opens TransactionForm\n2. `useExpenseContextOptional()` returns `null` (not inside provider)\n3. Falls back to: `await createExpense(data)` (line 137 in transaction-form.tsx)\n4. This IS blocking - modal waits for server\n5. \"Saving...\" persists until server completes\n\n## Solution: Fire-and-Forget in Form\nMake TransactionForm fire-and-forget when creating NEW items without context.\n\n**File: components/transaction-form.tsx**\n\nChange lines 136-138 from:\n```typescript\n} else {\n  await createExpense(data);  // BLOCKING\n}\n```\n\nTo:\n```typescript\n} else {\n  createExpense(data).catch(() =\u003e {\n    toast.error('Failed to create expense');\n  });\n}\n```\n\nSame for income (lines 165-167).\n\n## Files Involved\n- `components/transaction-form.tsx` - Form submission logic\n- `components/fab.tsx` - Desktop FAB (renders form outside context)\n- `components/bottom-tab-bar.tsx` - Mobile FAB (renders form outside context)\n- `lib/contexts/expense-context.tsx` - Optimistic context (works correctly)\n- `lib/contexts/income-context.tsx` - Optimistic context (works correctly)\n- `app/(app)/layout.tsx` - Where FAB/BottomTabBar mount\n- `app/(app)/expenses/page.tsx` - Where ExpenseListProvider lives\n- `app/(app)/income/page.tsx` - Where IncomeListProvider lives\n\n## Alternative Solutions\n1. Move providers to layout level (more complex, requires layout data fetching)\n2. Pass server actions as props to FAB (messy prop drilling)\n3. Use global state management (overkill for this)\n\nFire-and-forget in form is simplest - ~10 line change.\n\n## Testing Checklist\n- [ ] FAB from dashboard (no context) - closes immediately\n- [ ] FAB from expenses page (has context) - uses optimistic flow\n- [ ] Mobile bottom tab bar - closes immediately\n- [ ] Error toast shows on failure\n- [ ] Success case: data appears after revalidation\n- [ ] Edit mode still awaits (important!)","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-04T07:28:53.698397-03:00","created_by":"caiodgallo","updated_at":"2026-01-04T07:28:53.698397-03:00"}
{"id":"northstar-20d","title":"[BUG] Manually created expense setting date to the wrong month","description":"When creating an expense (maybe an income also) if I set the purchase date to 31 Dec 2025, the purchase date actually appears as 31 Jan 2026 (my current year month). So the day looks correct but month/year wrong","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T05:45:31.582448-03:00","created_by":"caiodgallo","updated_at":"2026-01-03T06:02:53.604548-03:00","closed_at":"2026-01-03T06:02:53.604548-03:00","close_reason":"Closed"}
{"id":"northstar-42h","title":"Open add expense/income modal with keyboard open and amount input focused","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T18:10:44.464737-03:00","created_by":"caiodgallo","updated_at":"2026-01-03T18:15:09.494299-03:00","closed_at":"2026-01-03T18:15:09.494299-03:00","close_reason":"Closed"}
{"id":"northstar-4nv","title":"Translate the Categories page","description":"The Categories page is still mainly hardcoded strings. They need to following the internalitzation pattern established accross the codebase and translated the suitable strings. Mainly UI components and layout at the present moment.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:32:43.104249-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T14:51:32.644368-03:00","closed_at":"2026-01-02T14:51:32.644368-03:00","close_reason":"Closed"}
{"id":"northstar-6b4","title":"Add click animation to 'popout' and 'hollow' Button variants on mobile","description":"Use the same animation as the current hover on desktop, but for the click on the mobile. FAB has something like this.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T18:12:20.993885-03:00","created_by":"caiodgallo","updated_at":"2026-01-03T18:17:42.51772-03:00","closed_at":"2026-01-03T18:17:42.51772-03:00","close_reason":"Closed"}
{"id":"northstar-8wh","title":"Create language switcher close to the theme switcher","description":"We must create a language switcher component close to the existing theme switcher one. It must follow the theme switcher style and idea.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:34:10.526382-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T12:52:40.444278-03:00","closed_at":"2026-01-02T12:52:40.444278-03:00","close_reason":"Closed"}
{"id":"northstar-ahq","title":"Add edit transaction functionality","description":"## Summary\nAdd ability to edit transactions from expense/income cards and detail sheet.\n\n## Context\n- TransactionForm already supports edit mode via `transaction`/`income` props\n- Server actions `updateExpense` and `updateIncome` already exist\n- `getTransactionWithEntries(transactionId)` fetches transaction + entries\n\n## Key Behavior\nWhen editing expense with installments: ALL entries are deleted and regenerated, losing `paidAt` status.\n**Decision**: Show warning dialog before editing multi-installment expenses.\n\n## Implementation Steps\n\n### 1. Create EditTransactionDialog component\nNew file: `components/edit-transaction-dialog.tsx`\n- Handles fetching transaction with entries (for expenses)\n- Renders TransactionForm in edit mode\n- Shows warning for multi-installment expenses\n\n### 2. Update ExpenseCard\n- Add `accounts: Account[]` prop\n- Add \"Edit\" menu item to dropdown\n- Integrate EditTransactionDialog\n\n### 3. Update IncomeCard\n- Add `accounts: Account[]` prop\n- Add \"Edit\" menu item to dropdown\n- Integrate EditTransactionDialog\n\n### 4. Update TransactionDetailSheet\n- Add `accounts` and `categories` props\n- Make Edit button functional\n- Close sheet when opening edit dialog\n\n### 5. Update parent pages\nPass accounts prop to cards in:\n- `app/(app)/expenses/page.tsx`\n- `app/(app)/income/page.tsx`\n\n### 6. Add translations\nAdd keys to `messages/en.json` and `messages/pt-BR.json`:\n- `expenses.editTransaction`\n- `income.editTransaction`\n- Warning dialog text for multi-installment edits\n\n## Editable Fields\n**Expenses**: description, amount, category, account, purchaseDate, installments\n**Income**: description, amount, category, account, receivedDate\n\n## Files to Modify\n1. `components/edit-transaction-dialog.tsx` (new)\n2. `components/expense-card.tsx`\n3. `components/income-card.tsx`\n4. `components/transaction-detail-sheet.tsx`\n5. `app/(app)/expenses/page.tsx`\n6. `app/(app)/income/page.tsx`\n7. `messages/en.json`\n8. `messages/pt-BR.json`","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T06:44:47.98322-03:00","created_by":"caiodgallo","updated_at":"2026-01-03T06:53:54.658421-03:00","closed_at":"2026-01-03T06:53:54.658421-03:00","close_reason":"Closed"}
{"id":"northstar-f1c","title":"Translate the Accounts page","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T12:31:36.862994-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T12:31:52.644518-03:00","deleted_at":"2026-01-02T12:31:52.644518-03:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"northstar-gbp","title":"Translate the Accounts page","description":"The Accounts page is still mainly hardcoded strings. They need to following the internalitzation pattern established accross the codebase and translated the suitable strings. Mainly UI components and layout at the present moment.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:32:22.893286-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T14:48:48.710898-03:00","closed_at":"2026-01-02T14:48:48.710898-03:00","close_reason":"Closed"}
{"id":"northstar-o3p","title":"Security Hardening for Public Launch","description":"Complete security audit and hardening before public launch with multi-user support. Addresses critical multi-tenancy vulnerabilities, authorization, rate limiting, and auth hardening.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-02T15:50:42.526809-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T15:50:42.526809-03:00"}
{"id":"northstar-o3p.1","title":"Add userId to schema and migrate existing data","description":"CRITICAL: Add userId column to all tables (accounts, categories, budgets, monthlyBudgets, transactions, income, faturas). Create Drizzle migration, write data migration SQL, and add RLS policies.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:51:24.712209-03:00","created_by":"caiodgallo","updated_at":"2026-01-03T05:59:33.331082-03:00","closed_at":"2026-01-03T05:59:33.331082-03:00","close_reason":"Closed","labels":["database","security"],"dependencies":[{"issue_id":"northstar-o3p.1","depends_on_id":"northstar-o3p","type":"parent-child","created_at":"2026-01-02T15:51:24.716313-03:00","created_by":"caiodgallo"}]}
{"id":"northstar-o3p.2","title":"Implement authorization checks in all server actions","description":"CRITICAL: Create lib/auth/get-current-user.ts helper. Update all server actions (accounts, categories, expenses, budgets, income, faturas, import) with userId filtering and ownership verification.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:51:25.848561-03:00","created_by":"caiodgallo","updated_at":"2026-01-04T06:44:27.641225-03:00","closed_at":"2026-01-04T06:44:27.641225-03:00","close_reason":"Closed","labels":["authorization","security"],"dependencies":[{"issue_id":"northstar-o3p.2","depends_on_id":"northstar-o3p","type":"parent-child","created_at":"2026-01-02T15:51:25.862439-03:00","created_by":"caiodgallo"},{"issue_id":"northstar-o3p.2","depends_on_id":"northstar-o3p.1","type":"blocks","created_at":"2026-01-02T15:52:17.215987-03:00","created_by":"caiodgallo"}]}
{"id":"northstar-o3p.3","title":"Add Upstash rate limiting to server actions","description":"Install @upstash/ratelimit and @upstash/redis. Create rate limiter utility. Apply to auth actions and bulk operations.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T15:51:26.935934-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T15:51:26.935934-03:00","labels":["rate-limiting","security"],"dependencies":[{"issue_id":"northstar-o3p.3","depends_on_id":"northstar-o3p","type":"parent-child","created_at":"2026-01-02T15:51:26.939627-03:00","created_by":"caiodgallo"},{"issue_id":"northstar-o3p.3","depends_on_id":"northstar-o3p.2","type":"blocks","created_at":"2026-01-02T15:52:17.349329-03:00","created_by":"caiodgallo"}]}
{"id":"northstar-o3p.4","title":"Add security headers and strengthen auth","description":"Add security headers to next.config.ts (CSP, HSTS, X-Frame-Options). Update supabase/config.toml for 8+ char passwords. Enable email confirmation. Add hCaptcha/Turnstile to login.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:51:28.473209-03:00","created_by":"caiodgallo","updated_at":"2026-01-04T11:58:28.094268-03:00","closed_at":"2026-01-04T11:58:28.094268-03:00","close_reason":"Closed","labels":["auth","headers","security"],"dependencies":[{"issue_id":"northstar-o3p.4","depends_on_id":"northstar-o3p","type":"parent-child","created_at":"2026-01-02T15:51:28.476001-03:00","created_by":"caiodgallo"}]}
{"id":"northstar-o3p.5","title":"Harden input validation and cleanup secrets","description":"Add validation to accounts.ts, income.ts, categories.ts. Add file upload validation (MIME type, size limits). Remove commented credentials from .env. Reduce error logging verbosity.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T15:51:29.592432-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T15:51:29.592432-03:00","labels":["security","validation"],"dependencies":[{"issue_id":"northstar-o3p.5","depends_on_id":"northstar-o3p","type":"parent-child","created_at":"2026-01-02T15:51:29.594404-03:00","created_by":"caiodgallo"}]}
{"id":"northstar-t9p","title":"Translate the Budgets(settings) page","description":"The Budgets(settings) page is still mainly hardcoded strings. They need to following the internalitzation pattern established accross the codebase and translated the suitable strings. Mainly UI components and layout at the present moment.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:33:11.3106-03:00","created_by":"caiodgallo","updated_at":"2026-01-02T14:51:32.827899-03:00","closed_at":"2026-01-02T14:51:32.827899-03:00","close_reason":"Closed"}
